<%- include("templates/header") %>
<!-- 
  <script src="/app.js"></script> -->


  <!-- <link rel="stylesheet" href="/public/css/main.css"> -->

  <style>
    #answer {
      border: 2px solid #392f5a;
      padding: 10px;
      font-size: 20px;
      font-weight: bold;
      min-height: 200px;
    }
    #question-input {
      width: 50%;
      height: 100px;
      font-size: 20px;
      padding: 20px;
      border: 2px solid #392f5a;
      border-radius: 10px;
      margin: 0 auto 20px auto;
      display: block;
    }
    button[type="submit"] {
      background-color: #1215b8;
      border-color: #9dd9d2;
      color: #e0dfd5;
      font-size: 20px;
      font-weight: bold;
      padding: 10px 30px;
    }

    /* body, html {
      height: 100%;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    } */

    .dancing-div {
      width: 100%;
      height: 100px;
      border: 2px solid black;
      animation: dance 3s infinite;
      transform-origin: center;
    }

    @keyframes dance {
      0%, 100% { transform: translateX(0) rotate(0); }
      25% { transform: translateX(-30px) rotate(-15deg); }
      50% { transform: translateX(30px) rotate(15deg); }
      75% { transform: translateX(-15px) rotate(-10deg); }
    }
  </style>

  <script>
    $(document).ready(function() {
    $('#question-form').submit(function(event) {
      event.preventDefault(); // Prevent default form submission behavior
      var question = $('#question-input').val();
      var language = $('#formLanguageSelect').val();
  
      // Send an AJAX request to the server
      $.ajax({
        type: 'POST',
        url: '/respond',
        data: { prompt: question, language: language },
        success: function(response) {
          // Display the response in the answerDiv
          $('#answer').text(response.answer);
        }
      });
    });
  });
  $(document).ready(function() {
      function danceDiv(divId) {
        var $div = $("#" + divId);
        $div.addClass("dancing-div");
      }

      // Call the danceDiv function with the desired div ID
      // danceDiv("answer");
      // danceDiv("question-input");
      // danceDiv("formLanguageSelect");
    });
  </script>

  <!-- Content -->
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12">
        <iframe id="hidden-iframe" name="hidden-iframe" style="display:none;"></iframe>
        <h1 class="text-center my-5">Welcome to LegallyWise AI!</h1>
        <form id="question-form" action='/respond' method='post' target="hidden-iframe">
          <input id="question-input" name="prompt" type="text" class="form-control" placeholder="Enter your legal question">
          <div class="form-group">
              <label for="formLanguageSelect" id="languageLabel">Select Language</label>
              <select class="form-control" id="formLanguageSelect" name="language">
                <option>English</option>
                <option>French</option>
                <option>Spanish</option>
                <option>Arabic</option>
              </select>
          </div>
          <div>
            <button type="submit" class="btn btn-primary d-block mx-auto">Ask a Question</button>
          </div>
        </form>
        <div class="row justify-content-center">
          <div class="col-sm-8">
            <div id="answer" class="my-4"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- <script>
    document.addEventListener("DOMContentLoaded", function() {
      document.getElementById("question-form").addEventListener("submit", function(event) {
        event.preventDefault(); // prevent default form submission behavior
        console.log("worked");

        // Get the question and language from the form
        const question = document.getElementById("question-input").value;
        const language = document.getElementById("language-select").value;

        // Send the question and language to the server using fetch()
        fetch("/respond", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ question, language })
        })
        .then(response => response.json())
        .then(data => {
          // Update the answer div with the response from the server
          const answerDiv = document.getElementById("answer");
          answerDiv.innerHTML = data.answer;
        })
        .catch(error => console.error(error));
      });
    });
  </script> -->

  <%- include("templates/footer") %>